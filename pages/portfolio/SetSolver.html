<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Jaume Albardaner</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="../../assets/img/J.png" rel="icon">
  <link href="../../assets/img/J.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="../../assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="../../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../../assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="../../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="../../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="../../assets/css/style.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: iPortfolio - v3.8.1
  * Template URL: https://bootstrapmade.com/iportfolio-bootstrap-portfolio-websites-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Mobile nav toggle button ======= -->
  <i class="bi bi-list mobile-nav-toggle d-xl-none"></i>

  <!-- ======= Header ======= -->
  <header id="header">
    <div class="d-flex flex-column">

      <div class="profile">
        <img src="../../assets/img/profile-img.jpg" alt="" class="img-fluid rounded-circle">
        <h1 class="text-light"><a href="../../index.html">Jaume Albardaner <br>i Torras</a></h1>
        <div class="social-links mt-3 text-center">
          <a href="https://www.linkedin.com/in/jaumealbardaner/" class="linkedin"><i class="bx bxl-linkedin"></i></a>
          <a href="mailto:jaumealbardaner@gmail.com" class="email"><i class="bi bi-envelope"></i></a>
          <a href="https://www.instagram.com/jaumealbardaner/" class="instagram"><i class="bi bi-instagram"></i></a>
          <a href="https://github.com/JaumeAlbardaner"><i class="bi bi-github"></i></a>
          <a href="https://scholar.google.com/citations?user=fzkBS-cAAAAJ"><i class="fas fa-graduation-cap google-scholar-icon"></i></a>
        </div>
      </div>

      <nav id="navbar" class="nav-menu navbar">
        <ul>
          <li><a href="../../index.html#hero" class="nav-link scrollto active"><i class="bx bx-home"></i> <span>Home</span></a></li>
          <li><a href="../../index.html#about" class="nav-link scrollto"><i class="bx bx-user"></i> <span>About</span></a></li>
          <li><a href="../../index.html#resume" class="nav-link scrollto"><i class="bx bx-file-blank"></i> <span>Resume</span></a></li>
          <li><a href="../../index.html#portfolio" class="nav-link scrollto"><i class="bx bx-book-content"></i> <span>Portfolio</span></a></li>
          <!-- <li><a href="#services" class="nav-link scrollto"><i class="bx bx-server"></i> <span>Services</span></a></li> -->
          <li><a href="../../index.html#contact" class="nav-link scrollto"><i class="bx bx-envelope"></i> <span>Contact</span></a></li>
        </ul>
      </nav><!-- .nav-menu -->
    </div>
  </header><!-- End Header -->

  <main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <section class="breadcrumbs">
      <div class="container">

        <div class="d-flex justify-content-between align-items-center">
          <h2>Set Solver</h2>
          <ol>
            <li><a href="../../index.html">Home</a></li>
            <li>Set Solver</li>
          </ol>
        </div>

      </div>
    </section><!-- End Breadcrumbs -->

    <section class="inner-page">
      <div class="container">
        <br>
        <p><b>Level:</b> Medium project
          <br>
          
          <b>GitHub Repository:</b>  <a href="https://github.com/JaumeAlbardaner/setSolver">https://github.com/JaumeAlbardaner/setSolver</a>
        </p>
        

        <h3>What is "Set"?</h3>
          <p>
            Set is a fast-paced card game based on pattern recognition, where players race to identify sets of cards that share or differ across multiple attributes. The game is designed for 1 or more players and is known for its simplicity and depth of strategy, appealing to both casual and competitive players.
            <div class="row justify-content-md-center">
              <div class="col-3">
                <img src="https://m.media-amazon.com/images/I/71qnZiyk2BL.jpg" class="img-fluid" width=100%>
              </div>
              </div>
          </p>

          <h3>Deck</h3>
            <p>
              <i>Set</i> is a card game that consists of a total of 81 cards.
              <br>
              These cards contain the following:
              <ul>
                <li><b>Shapes:</b> Shapes of type Capsule (c), Romb (r), Wave (w).</li>
                <li><b>Filling:</b> Shapes can be Light (l, no filling), Gradient (g, 50% filling), Dark (d, completely filled).</li>
                <li><b>Color:</b> Shapes can take colors Green (g), Violet (v) or Red (r).</li>
                <li><b>Number:</b> There can be 1, 2 or 3 shapes per card.</li>
              </ul>
            </p>
        <h3>How is it played?</h3>
        <p>
          <ol>
            <li><b>Setup:</b> Twelve cards are laid face-up in a grid.</li>
            <li><b>Finding a Set:</b> Players race to find a set of three cards that meet the set criteria (either all the same or all different for each attribute). There are no turns; the first player to spot a set calls out "Set!" and points to the cards.</li> 
            <li><b>Validation and Replacement:</b> If the set is correct, the three cards are removed and replaced with new ones from the deck. If incorrect, the player must wait before calling another set.</li>
            <li><b>End of Game:</b> The game continues until the deck is depleted and no more sets can be found. The player with the most sets wins.</li>
          </ol>
        </p>
        <p>
          It may also happen that with all twelve cards laid down there is no feasible combination of cards to be made. 
          <br>
          The likeliness of this scenario happening is low, <b>but not zero</b>.
        </p>

        <h3>What is "Set Solver"?</h3>  
        <p>
          Set Solver is a project that aims to solve the game of Set, mostly aimed to assure the player that there are no more sets to be found in the current layout of cards.
        </p>

        <p>As seen in the previous explanation, there are two main technologies at work:</p>
        <ul>
          <li>Card recognition, to recognize each card and differentiate them from the others</li>
          <li>Logic, to ensure the constraints are respected.</li>
        </ul>
      
        <p>To mimic human behavior, these two technologies have been approached with the use of YOLOv8 and a SAT-solver.</p>

        <h4>Card recognition</h4>

        <p>To train a YOLO model to recognize images, one usually needs thousands of images per class to be trained. Since I'm lazy I only took one picture of each card and added virtual noise to it later. Although it's not as robust, it saves a lot of time taking photos and labeling (mostly because we have 81 classes in this case).</p>
      
        <p>The procedure to train the YOLO model was the following:</p>
      
        <ol>
          <li>Take pictures of all the cards on a black background.</li>
        </ol>
      
        <div class="row justify-content-md-center">
          <div class="col-3">
            <img src="https://raw.githubusercontent.com/JaumeAlbardaner/setSolver/refs/heads/master/docs/readme_images/IMG_20240902_135444.jpg" class="img-fluid" width=100%>
          </div>
          </div>

      
        <ol start="2">
          <li>Run a segmentation algorithm to remove the parts of the image that don't belong to the card.</li>
        </ol>
        <div class="row justify-content-md-center">
          <div class="col-2">
            <img src="https://raw.githubusercontent.com/JaumeAlbardaner/setSolver/refs/heads/master/docs/readme_images/rdv1.png" class="img-fluid" width=100%>
          </div>
          </div>
      
        <ol start="3">
          <li>With some randomization (translation/rotation/perspective transform), place the image of the card on top of another image (to act as noise) and write down its bounding box in a .txt file (YOLO standard).</li>
        </ol>
        <div class="row justify-content-md-center">
          <div class="col-5">
            <img src="https://raw.githubusercontent.com/JaumeAlbardaner/setSolver/refs/heads/master/docs/readme_images/train_batch36451.jpg" class="img-fluid" width=100%>
          </div>
          </div>

      
        <p>(The rage comics were most of my already-downloaded resources, any other images are also accepted as noise.)</p>
      
        <ol start="4">
          <li>Train the YOLO NN.</li>
        </ol>

        <div class="row justify-content-md-center">
          <div class="col-5">
            <img src="https://raw.githubusercontent.com/JaumeAlbardaner/setSolver/refs/heads/master/docs/readme_images/results.png" class="img-fluid" width=100%>
          </div>
          </div>


          <h4>Logic</h4>

          <p>Since there are some constraints to be fulfilled, we must ensure that the selection of cards <strong>satisfies</strong> these conditions. Hence why I decided to use a SAT-solver.</p>
        
          <p>A SAT solver is a software tool used to determine whether a given Boolean formula can be satisfied, meaning if there exists an assignment of true or false values to variables that makes the entire formula evaluate to true.</p>
        
          <p>In this SAT problem, I've made the first N variables correspond to the <em>"picking"</em> of a card 1..N, meaning that if the variable is true, that card is one of the 3 cards that make a set.</p>
        
          <p>After this, 12 boolean variables follow with the properties of each variable (4 properties * 3 possibilities = 12 boolean literals). The order of these variables is the following:</p>
        
          <ul>
            <li>(Shape) c r w</li>
            <li>(Filling) l g d</li>
            <li>(Color) g r v</li>
            <li>(Number) 1 2 3</li>
          </ul>
        
          <p>To talk in the context of the SAT solver, the following clauses have to be applied:</p>
        
          <ol>
            <li>Exactly 3 cards must be selected.</li>
          </ol>
        
          <p>Most solvers already implement the "exactly" restriction with the iterative use of <code>atLeast</code> and <code>atMost</code>. In the case of the Kotlin library used, it is called using <code>solver.addExactly(new VecInt(variableArray), requiredTrue);</code></p>
        
          <ol start="2">
            <li>If a card is selected, its properties must be fulfilled. E.g. in a card with properties 3 4 8 10 this would be set as follows:</li>
          </ol>
        
          <p align="center">
            <code>x_1 &rarr; (3 &and; 4 &and; 8 &and; 10)</code><br>
            <code>(-x_1 &or; 3) &and; (-x_1 &or; 4) &and; (-x_1 &or; 8) &and; (-x_1 &or; 10)</code>
          </p>
        
          <ol start="3">
            <li>A property can only be fulfilled if a card with said property is chosen. E.g. property 3 is present in cards <code>x_1</code>, <code>x_4</code>, <code>x_{12}</code>, <code>x_9</code>:</li>
          </ol>
        
          <p align="center">
            <code>x_1 &rarr; (x_1 &or; x_4 &or; x_{12} &or; x_9)</code><br>
            <code>-x_1 &or; x_1 &or; x_4 &or; x_{12} &or; x_9</code>
          </p>
        
          <ol start="4">
            <li>There can't be a property with 2 different values (it must be either all the same or all different). For property with variables 3, 4, and 5.</li>
          </ol>
        
          <p align="center">
            <code>(3 &or; 4 &or; 5) &and; (3 &or; -4 &or; -5) &and; (-3 &or; 4 &or; -5) &and; (-3 &or; -4 &or; 5)</code>
          </p>
        
          <h3>Resulting app</h3>
        
          <p>Combining the object detection together with the SAT-solver logic, the following result is achieved:</p>
        
          <p>
            <b>Images:</b>
          </p>

          <div class="row justify-content-md-center">
            <div class="col-3">
              <img src="https://raw.githubusercontent.com/JaumeAlbardaner/setSolver/refs/heads/master/docs/readme_images/simEnv.jpg" class="img-fluid" width=100%>
            </div>
            <div class="col-3">
              <img src="https://raw.githubusercontent.com/JaumeAlbardaner/setSolver/refs/heads/master/docs/readme_images/realEnv.jpg" class="img-fluid" width=100%>
              
            </div>
            </div>
  
            <p>
              <b>Videos:</b>
            </p>


            <div class="row justify-content-md-center">
              <!-- https://drive.google.com/file/d/1us3jJ39VRkkeLIZZ4yfwj9Lf5GHD5VOk/view?usp=drive_link -->
              <iframe style="height: 40vh; width: 15vw" src="https://drive.google.com/file/d/1us3jJ39VRkkeLIZZ4yfwj9Lf5GHD5VOk/preview" allow="autoplay" allowfullscreen="allowfullscreen"></iframe>
              <iframe style="height: 40vh; width: 15vw" src="https://drive.google.com/file/d/12my_7-aY9_8AG10FbY_OZUvqLUabbq39/preview" allow="autoplay" allowfullscreen="allowfullscreen"></iframe>
              <iframe style="height: 40vh; width: 15vw" src="https://drive.google.com/file/d/1nUjJDxuDv2QLrhvXg56HKQdEguFDaMhq/preview" allow="autoplay" allowfullscreen="allowfullscreen" muted="true"></iframe>
              
              </div>

              

      </div>
    </section>

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>iPortfolio</span></strong>
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/iportfolio-bootstrap-portfolio-websites-template/ -->
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>
  </footer><!-- End  Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="../../assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="../../assets/vendor/aos/aos.js"></script>
  <script src="../../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../../assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="../../assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="../../assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="../../assets/vendor/typed.js/typed.min.js"></script>
  <script src="../../assets/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="../../assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="../../assets/js/main.js"></script>

</body>

</html>